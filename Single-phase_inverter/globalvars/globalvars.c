/*
 * globalvars.c
 *
 *  Created on: 2025年8月28日
 *      Author: LW
 */

// ----------------------------------------------------------------------
// 头文件
// ----------------------------------------------------------------------
#include "F28x_Project.h"



// ----------------------------------------------------------------------
// 变量定义
// ----------------------------------------------------------------------

int16_t ISR_ADCA1;  // 中断标志

// 实时测量值
// -----------------------------------------
float32_t g_VoInst;   // 输出的瞬时测量电压值
float32_t g_LiInst;   // 瞬时测量电感电流值
float32_t g_VbusInst; // 直流实时测量电压值

// 角度 角频率
// -----------------------------------------
float32_t g_Theta ; // 旋转角度(rad)，用于Park和反Park变换
float32_t g_Omega ; // 角频率(rad/s)，ω = 2*PI*f


// 代码运行时间变量
float32_t time_start, time_end;
float32_t exec_time_us;  // 执行时间（微秒）

//sogi代码运行时间变量
float32_t sogi_start_time, sogi_end_time;
float32_t sogi_time_us;

// ----------------------------------------------------------------------
// 函数定义
// ----------------------------------------------------------------------


// =============================================================================
/*******************************************************************************
 函数名称：    void InitGlobalVariable(void)
 功能描述：    初始化系统全局变量
 输入参数：    无
 输出参数：    无
 返 回 值：    无
 其它说明：    a.所有实时测量值初始化为0.0f，确保系统启动时无异常值
              b.中断标志位清零，确保中断处理逻辑正确
 修改日期      版本号          修改人            修改内容
 -----------------------------------------------------------------------------
 2025/08/27    V1.0           JZY              创建
********************************************************************************/
void InitGlobalVariable(void)
{

    ISR_ADCA1 = 0;   // 中断标志 在进入中断时置 1

    // =======================================================
    // 交流电压部分
    // =======================================================

    g_VoInst = 0.0f;       // 输出电压实时值

    // =======================================================
    // 交流电流部分
    // =======================================================

    g_LiInst = 0.0f;      // 电感电流实时值

    // =======================================================
    // 直流电压部分
    // =======================================================

    g_VbusInst = 0.0f;   // 直流电压实时值

    // =======================================================
    // 角度 角频率
    // =======================================================

    g_Theta = 0.0f;  // 旋转角度(rad) 用于Park和反Park变换
    g_Omega = 0.0f;  // 角频率(rad/s) ω = 2*PI*f




}


// ---------------------------------
// End of File
// ---------------------------------

