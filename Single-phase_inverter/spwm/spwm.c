/*
 * spwm.c
 *
 *  Created on: 2025/08/28
 *      Author: LW
 */


// --------------------------------------
// 头文件
// --------------------------------------
#include "F28x_Project.h"



// --------------------------------------
// 变量定义
// --------------------------------------



// --------------------------------------
// 函数定义
// --------------------------------------


// =============================================================================
/*******************************************************************************
 函数名称：    void SPWM_Unipolar_DB(float32_t norm_value, int16_t* cmp1, int16_t* cmp2)
 功能描述：    单极性倍频调制方式实现
 输入参数：    norm_value: 归一化后的参考电压/电流值，范围[0, 1]
 输出参数：    cmp1: PWM1比较值，输出范围[0, 2500]
              cmp2: PWM2比较值，输出范围[0, 2500]
 返 回 值：    无
 其它说明：
 修改日期      版本号          修改人            修改内容
 -----------------------------------------------------------------------------
 2025/08/27    V1.0           LW             创建
********************************************************************************/
void SPWM_Unipolar_DB(float32_t norm_value, int16_t* cmp1, int16_t* cmp2)
{
    // 计算比较值
    *cmp1 = (int16_t)(1250 * -norm_value) + 1250;
    *cmp2 = (int16_t)(1250 *  norm_value) + 1250;

    // 限幅处理(0 ~ 2500)
    if (*cmp1 > 2500)
        *cmp1 = 2500;
    if (*cmp1 < 0)
        *cmp1 = 0;

    // 限幅处理(0 ~ 2500)
    if (*cmp2 > 2500)
        *cmp2 = 2500;
    if (*cmp2 < 0)
        *cmp2 = 0;
}


// ---------------------------------
// End of File
// ---------------------------------
